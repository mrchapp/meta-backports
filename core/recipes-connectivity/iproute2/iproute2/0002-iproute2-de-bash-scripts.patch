From b8f10fcfe7490369d65e0fd19f281216b9a0c554 Mon Sep 17 00:00:00 2001
From: Chen Qi <Qi.Chen@windriver.com>
Date: Fri, 1 Jun 2018 13:58:54 +0200
Subject: [PATCH 2/4] iproute2: de-bash scripts

de-bash these two scripts to make iproute2 not depend on bash.

Upstream-Status: Pending

Signed-off-by: Chen Qi <Qi.Chen@windriver.com>
Signed-off-by: Anders Roxell <anders.roxell@linaro.org>
---
 ip/ifcfg | 13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

diff --git a/ip/ifcfg b/ip/ifcfg
index 5b34decd4480..e1cf2f644774 100755
--- a/ip/ifcfg
+++ b/ip/ifcfg
@@ -2,12 +2,13 @@
 # SPDX-License-Identifier: GPL-2.0
 
 CheckForwarding () {
-  local sbase fwd
+  local sbase fwd forwarding
   sbase=/proc/sys/net/ipv4/conf
   fwd=0
   if [ -d $sbase ]; then
     for dir in $sbase/*/forwarding; do
-      fwd=$(( fwd + $(cat "$dir") ))
+      forwarding=`cat $dir`
+      fwd=$(($fwd+$forwarding))
     done
   else
     fwd=2
@@ -128,12 +129,12 @@ fi
 arping -q -A -c 1 -I $dev $ipaddr
 noarp=$?
 ( sleep 2 ;
-  arping -q -U -c 1 -I $dev $ipaddr ) >/dev/null 2>&1 </dev/null &
+  arping -q -U -c 1 -I $dev $ipaddr ) > /dev/null 2>&1 </dev/null &
 
-ip route add unreachable 224.0.0.0/24 >/dev/null 2>&1
-ip route add unreachable 255.255.255.255 >/dev/null 2>&1
+ip route add unreachable 224.0.0.0/24 > /dev/null 2>&1
+ip route add unreachable 255.255.255.255 > /dev/null 2>&1
 if [ "`ip link ls $dev | grep -c MULTICAST`" -ge 1 ]; then
-  ip route add 224.0.0.0/4 dev $dev scope global >/dev/null 2>&1
+  ip route add 224.0.0.0/4 dev $dev scope global > /dev/null 2>&1
 fi
 
 if [ $fwd -eq 0 ]; then
-- 
2.17.0

